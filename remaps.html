<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Vehicle Remapping — DT Tuning</title>
  <meta name="description" content="Stage 1–3, economy remaps, gearbox tuning, and software solutions."/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"/>
  <link href="assets/styles.css" rel="stylesheet"/>
</head>
<body>
<header class="carbon">
  <div class="container nav">
    <div class="brand">
      <img alt="DT Tuning & Development Logo" class="rounded" src="https://www.dttuning.com/_next/image?q=75&url=%2Flogo.png&w=640" loading="lazy"/>
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="service.html">File Service</a>
      <a href="remaps.html">Remaps</a>
      <a href="store.html">Store</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact Us</a>
    </nav>
    <button class="burger" aria-label="Toggle menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="cta">
      <a class="btn btn-ghost" href="tel:+447782298093" title="Call us">
        <img alt="Call" src="assets/Phone.png" style="height:44px;width:44px;vertical-align:middle" loading="lazy"/>
      </a>
      <a class="btn btn-ghost" href="https://wa.me/447782298093" title="Chat on WhatsApp">
        <img alt="WhatsApp" src="assets/Whatsapp.png" style="height:44px;width:44px;vertical-align:middle" loading="lazy"/>
      </a>
      <a class="btn btn-primary" href="book.html">Book Now</a>
    </div>
  </div>
</header>

<section class="section">
  <div class="container">
    <h1 class="h2">Vehicle Remapping</h1>
    <p class="sub">Stage 1–3 packages, economy remaps for diesel, and options like speed limiter removal. DPF/EGR/AdBlue software solutions available on request.</p>

    <div class="list">
      <div class="card">
        <img alt="BMW remap" class="rounded" src="assets/yellow_headlight.jpg" loading="lazy"/>
        <p><strong>Stage 1</strong><br/>Safe, effective power gain with no hardware changes.</p>
        <p class="price">From £185</p>
      </div>

      <div class="card">
        <img alt="Supercar tuning" class="rounded" src="assets/gold_golf.jpg" loading="lazy"/>
        <p><strong>Stage 2/3</strong><br/>For performance builds with hardware mods.</p>
        <p class="price">From £245 - POA</p>
      </div>

      <div class="card">
        <img alt="Pops and bangs" class="rounded" src="assets/golf_flames.jpg" loading="lazy"/>
        <p><strong>Pops &amp; Bangs</strong><br/>Exhaust acoustics where legal and requested.</p>
        <p class="price">Optional Add Ons</p>
      </div>

      <div class="card">
        <img alt="Gearbox TCU" class="rounded" src="assets/red_taillight.jpg" loading="lazy"/>
        <p><strong>TCU/Gearbox</strong><br/>Smoother shifts and torque optimisation.</p>
        <p class="price">From £195</p>
      </div>
    </div>

    <div style="text-align:center; margin-top: 30px;">
      <a class="btn btn-primary" href="#bhp-gains">Book Your Remap</a>
    </div>
  </div>
</section>

<section class="container" id="bhp-gains">
  <div class="section">
    <div class="list">
      <div class="card">
        <h3>Check your BHP gains</h3>
        <p>Enter your reg or select your vehicle to see estimated power/torque gains.</p>

        <div class="api-box" id="vehicle-check">
          <script src="https://portal.bensky.co.uk/w.php?id=1495&js=1"></script>
        </div>

        <div id="proceed-wrap"></div>
      </div>
    </div>
  </div>
</section>

<footer class="carbon">
  <div class="container foot">
    <div>
      <strong>DT Tuning &amp; Development</strong><br/>
      <small>Based in London, United Kingdom — Serving the UK &amp; Worldwide</small><br/><br/>
      <small>Email: info@dttuning.com  |  Phone: 07782 298093</small>
    </div>
    <div>
      <small>© <span id="y"></span> DT Tuning &amp; Development Ltd. All rights reserved.</small><br/>
      <small><a href="#">Privacy</a> · <a href="#">Terms</a></small>
    </div>
  </div>
</footer>

<div class="fab-dock">
  <a href="tel:+447782298093" aria-label="Call"><img src="assets/Phone.png" alt="Call"></a>
  <a href="https://wa.me/447782298093" target="_blank" rel="noopener" aria-label="WhatsApp"><img src="assets/Whatsapp.png" alt="WhatsApp"></a>
</div>

<script>
  // Year
  document.getElementById('y').textContent = new Date().getFullYear();

  // Smooth scroll for in-page anchors
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', function(e){
      e.preventDefault();
      const to = document.querySelector(this.getAttribute('href'));
      if (to) to.scrollIntoView({ behavior: 'smooth' });
    });
  });

  // Add "Proceed to Booking" after widget renders
  (function(){
    const target = document.getElementById('vehicle-check');
    if (!target) return;
    const addProceedBtn = () => {
      if (document.getElementById('proceed-booking')) return;
      const wrap = document.getElementById('proceed-wrap');
      const btn = document.createElement('a');
      btn.id = 'proceed-booking';
      btn.href = 'book.html';
      btn.className = 'btn btn-primary';
      btn.textContent = 'Proceed to Booking';
      btn.style.display = 'inline-block';
      btn.style.marginTop = '20px';
      wrap.appendChild(btn);
    };
    const obs = new MutationObserver(() => addProceedBtn());
    obs.observe(target, { childList: true, subtree: true });
    setTimeout(addProceedBtn, 4000);
  })();

  /* ========= Single robust mobile menu controller ========= */
  (function(){
    const burger = document.querySelector('.burger');
    const nav    = document.querySelector('.nav-links');
    if (!burger || !nav) return;

    const openMenu = () => {
      burger.classList.add('active');
      burger.setAttribute('aria-expanded','true');
      nav.classList.add('active');
      document.body.classList.add('menu-open');
    };
    const closeMenu = () => {
      burger.classList.remove('active');
      burger.setAttribute('aria-expanded','false');
      nav.classList.remove('active');
      document.body.classList.remove('menu-open');
    };

    // Ensure closed on load + when restored from bfcache
    closeMenu();
    window.addEventListener('pageshow', closeMenu);

    // Toggle menu
    burger.addEventListener('click', (e) => {
      e.preventDefault();
      nav.classList.contains('active') ? closeMenu() : openMenu();
    });

    // Close on nav link click (mobile): close first, then navigate
    document.querySelectorAll('.nav-links a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.matchMedia('(max-width: 980px)').matches) {
          e.preventDefault();
          const href = a.getAttribute('href');
          closeMenu();
          setTimeout(() => { window.location.href = href; }, 120);
        }
      });
    });

    // Close when clicking outside header/nav (on dim overlay)
    document.addEventListener('click', (e) => {
      if (!document.body.classList.contains('menu-open')) return;
      if (!e.target.closest('header')) closeMenu();
    });

    // Close if resizing to desktop
    window.addEventListener('resize', () => {
      if (window.innerWidth > 980) closeMenu();
    });

    // ESC closes
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });
  })();
</script>
</body>
</html>